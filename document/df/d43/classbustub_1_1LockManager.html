<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>数据库系统 CMU15-445/645: bustub::LockManager类 参考</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">数据库系统 CMU15-445/645<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">CMU15-445/645 是基于现代 C++ 开发的支持并发操作的简单 SQL 操作的单机数据库</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../de/dda/namespacebustub.html">bustub</a></li><li class="navelem"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html">LockManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">类</a> &#124;
<a href="#pub-types">Public 类型</a> &#124;
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pub-attribs">Public 属性</a> &#124;
<a href="#pri-methods">Private 成员函数</a> &#124;
<a href="#pri-attribs">Private 属性</a> &#124;
<a href="../../db/de6/classbustub_1_1LockManager-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">bustub::LockManager类 参考</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../dd/ded/lock__manager_8h_source.html">lock_manager.h</a>&gt;</code></p>
<div class="dynheader">
bustub::LockManager 的协作图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/d50/classbustub_1_1LockManager__coll__graph.svg" width="100%" height="591"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a href="../../graph_legend.html">图例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
类</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d22/classbustub_1_1LockManager_1_1LockRequest.html">LockRequest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d5d/classbustub_1_1LockManager_1_1LockRequestQueue.html">LockRequestQueue</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public 类型</h2></td></tr>
<tr class="memitem:ae9072590d90b9b3861d415052c4872d3" id="r_ae9072590d90b9b3861d415052c4872d3"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> { <br />
&#160;&#160;<a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3a049518eb4dc1859c7cebbe15876cfd63">SHARED</a>
, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3af45c3a0bb3687ed8e221253b3fd4a2ce">EXCLUSIVE</a>
, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3ab11f57a27691980d3e7a302a7afc6aad">INTENTION_SHARED</a>
, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3ab59417045d16d94633837c40df3d2276">INTENTION_EXCLUSIVE</a>
, <br />
&#160;&#160;<a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3aa749f2cb8ae6821b5ac743924558b12b">SHARED_INTENTION_EXCLUSIVE</a>
<br />
 }</td></tr>
<tr class="separator:ae9072590d90b9b3861d415052c4872d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:a9a6999ff8d30e8f121741d074cb88775" id="r_a9a6999ff8d30e8f121741d074cb88775"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a9a6999ff8d30e8f121741d074cb88775">LockManager</a> ()=default</td></tr>
<tr class="separator:a9a6999ff8d30e8f121741d074cb88775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d98acacc57c96f93d2a0a2c5361a99" id="r_af8d98acacc57c96f93d2a0a2c5361a99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#af8d98acacc57c96f93d2a0a2c5361a99">StartDeadlockDetection</a> ()</td></tr>
<tr class="separator:af8d98acacc57c96f93d2a0a2c5361a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19fe2e283f59cf01ac33ec74ccd5ff16" id="r_a19fe2e283f59cf01ac33ec74ccd5ff16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a19fe2e283f59cf01ac33ec74ccd5ff16">~LockManager</a> ()</td></tr>
<tr class="separator:a19fe2e283f59cf01ac33ec74ccd5ff16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb7aa117f151b0033d96c247292d375" id="r_a2fb7aa117f151b0033d96c247292d375"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a2fb7aa117f151b0033d96c247292d375">LockTable</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> lock_mode, const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;oid) noexcept(false) -&gt; bool</td></tr>
<tr class="separator:a2fb7aa117f151b0033d96c247292d375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89c917de275498c22f53138355787447" id="r_a89c917de275498c22f53138355787447"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a89c917de275498c22f53138355787447">UnlockTable</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;oid) -&gt; bool</td></tr>
<tr class="separator:a89c917de275498c22f53138355787447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988be485d32619bd5165855c9cdaf0cf" id="r_a988be485d32619bd5165855c9cdaf0cf"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a988be485d32619bd5165855c9cdaf0cf">LockRow</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> lock_mode, const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;oid, const <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> &amp;rid) -&gt; bool</td></tr>
<tr class="separator:a988be485d32619bd5165855c9cdaf0cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd25bf2d1fd916e5d0900fdcee196aa2" id="r_acd25bf2d1fd916e5d0900fdcee196aa2"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#acd25bf2d1fd916e5d0900fdcee196aa2">UnlockRow</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;oid, const <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> &amp;rid, bool force=false) -&gt; bool</td></tr>
<tr class="separator:acd25bf2d1fd916e5d0900fdcee196aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df679feece998f685f834d98044e289" id="r_a5df679feece998f685f834d98044e289"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a5df679feece998f685f834d98044e289">AddEdge</a> (<a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> t1, <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> t2) -&gt; void</td></tr>
<tr class="separator:a5df679feece998f685f834d98044e289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af84ac003c1fda4f5a32fc3ecfc98bc80" id="r_af84ac003c1fda4f5a32fc3ecfc98bc80"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#af84ac003c1fda4f5a32fc3ecfc98bc80">RemoveEdge</a> (<a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> t1, <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> t2) -&gt; void</td></tr>
<tr class="separator:af84ac003c1fda4f5a32fc3ecfc98bc80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3f9957ef501be56f430ab93457dd17f" id="r_ab3f9957ef501be56f430ab93457dd17f"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ab3f9957ef501be56f430ab93457dd17f">HasCycle</a> (<a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> *txn_id) -&gt; bool</td></tr>
<tr class="separator:ab3f9957ef501be56f430ab93457dd17f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d26af3985fdcd94bd8412ff5b21ad6" id="r_ac5d26af3985fdcd94bd8412ff5b21ad6"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ac5d26af3985fdcd94bd8412ff5b21ad6">GetEdgeList</a> () -&gt; std::vector&lt; std::pair&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>, <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &gt;</td></tr>
<tr class="separator:ac5d26af3985fdcd94bd8412ff5b21ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac46d2abc2ed8ffa17934036d87e50d08" id="r_ac46d2abc2ed8ffa17934036d87e50d08"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ac46d2abc2ed8ffa17934036d87e50d08">RunCycleDetection</a> () -&gt; void</td></tr>
<tr class="separator:ac46d2abc2ed8ffa17934036d87e50d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public 属性</h2></td></tr>
<tr class="memitem:a4a17fdd331a495258d1bde87b1e39635" id="r_a4a17fdd331a495258d1bde87b1e39635"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/ddc/classbustub_1_1TransactionManager.html">TransactionManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a4a17fdd331a495258d1bde87b1e39635">txn_manager_</a></td></tr>
<tr class="separator:a4a17fdd331a495258d1bde87b1e39635"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private 成员函数</h2></td></tr>
<tr class="memitem:a8e0b652c7c55afc4c58206c4b427207c" id="r_a8e0b652c7c55afc4c58206c4b427207c"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a8e0b652c7c55afc4c58206c4b427207c">UpgradeLockTable</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> lock_mode, const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;oid) -&gt; bool</td></tr>
<tr class="separator:a8e0b652c7c55afc4c58206c4b427207c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c515c4b2aeb5d3468183c33b27296d2" id="r_a3c515c4b2aeb5d3468183c33b27296d2"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a3c515c4b2aeb5d3468183c33b27296d2">UpgradeLockRow</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> lock_mode, const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;oid, const <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> &amp;rid) -&gt; bool</td></tr>
<tr class="separator:a3c515c4b2aeb5d3468183c33b27296d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af279e37d82a658df65eabd1630823734" id="r_af279e37d82a658df65eabd1630823734"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#af279e37d82a658df65eabd1630823734">AreLocksCompatible</a> (<a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> l1, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> l2) -&gt; bool</td></tr>
<tr class="separator:af279e37d82a658df65eabd1630823734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f3df9531ee28e0803f4f62cade844a" id="r_a51f3df9531ee28e0803f4f62cade844a"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a51f3df9531ee28e0803f4f62cade844a">CanTxnTakeLock</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> lock_mode) -&gt; bool</td></tr>
<tr class="separator:a51f3df9531ee28e0803f4f62cade844a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad97ae8bb96143affec0af9f38916c233" id="r_ad97ae8bb96143affec0af9f38916c233"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ad97ae8bb96143affec0af9f38916c233">GrantNewLocksIfPossible</a> (<a class="el" href="../../dc/d5d/classbustub_1_1LockManager_1_1LockRequestQueue.html">LockRequestQueue</a> *lock_request_queue)</td></tr>
<tr class="separator:ad97ae8bb96143affec0af9f38916c233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5f3e3bd9f8f1d12b85aa7d8ea0a4a4" id="r_a7b5f3e3bd9f8f1d12b85aa7d8ea0a4a4"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a7b5f3e3bd9f8f1d12b85aa7d8ea0a4a4">CanLockUpgrade</a> (<a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> curr_lock_mode, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> requested_lock_mode) -&gt; bool</td></tr>
<tr class="separator:a7b5f3e3bd9f8f1d12b85aa7d8ea0a4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc760ce7abdd4c0a480519a75c5eefa0" id="r_acc760ce7abdd4c0a480519a75c5eefa0"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#acc760ce7abdd4c0a480519a75c5eefa0">CheckAppropriateLockOnTable</a> (<a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *txn, const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;oid, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a> row_lock_mode) -&gt; bool</td></tr>
<tr class="separator:acc760ce7abdd4c0a480519a75c5eefa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0465166131ad8dd93c14a9699a66309d" id="r_a0465166131ad8dd93c14a9699a66309d"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a0465166131ad8dd93c14a9699a66309d">FindCycle</a> (<a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> source_txn, std::vector&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &amp;path, std::unordered_set&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &amp;on_path, std::unordered_set&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &amp;visited, <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> *abort_txn_id) -&gt; bool</td></tr>
<tr class="separator:a0465166131ad8dd93c14a9699a66309d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c8d79190ecd17c7c6051b37485a7cb" id="r_ad2c8d79190ecd17c7c6051b37485a7cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ad2c8d79190ecd17c7c6051b37485a7cb">UnlockAll</a> ()</td></tr>
<tr class="separator:ad2c8d79190ecd17c7c6051b37485a7cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private 属性</h2></td></tr>
<tr class="memitem:aaa3c9cbaac66341c0154405c8ed2fbc7" id="r_aaa3c9cbaac66341c0154405c8ed2fbc7"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a>, std::shared_ptr&lt; <a class="el" href="../../dc/d5d/classbustub_1_1LockManager_1_1LockRequestQueue.html">LockRequestQueue</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#aaa3c9cbaac66341c0154405c8ed2fbc7">table_lock_map_</a></td></tr>
<tr class="separator:aaa3c9cbaac66341c0154405c8ed2fbc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5997c97741bb1f0c3e86a2bc1fdf6f52" id="r_a5997c97741bb1f0c3e86a2bc1fdf6f52"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a5997c97741bb1f0c3e86a2bc1fdf6f52">table_lock_map_latch_</a></td></tr>
<tr class="separator:a5997c97741bb1f0c3e86a2bc1fdf6f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1864c6f96f2dfab38930dcdadf4fd6" id="r_a3e1864c6f96f2dfab38930dcdadf4fd6"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a>, std::shared_ptr&lt; <a class="el" href="../../dc/d5d/classbustub_1_1LockManager_1_1LockRequestQueue.html">LockRequestQueue</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a3e1864c6f96f2dfab38930dcdadf4fd6">row_lock_map_</a></td></tr>
<tr class="separator:a3e1864c6f96f2dfab38930dcdadf4fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5994642266915aa8083cf74587873cbf" id="r_a5994642266915aa8083cf74587873cbf"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a5994642266915aa8083cf74587873cbf">row_lock_map_latch_</a></td></tr>
<tr class="separator:a5994642266915aa8083cf74587873cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d7352d720a774077a6de55ac708761a" id="r_a4d7352d720a774077a6de55ac708761a"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a4d7352d720a774077a6de55ac708761a">enable_cycle_detection_</a></td></tr>
<tr class="separator:a4d7352d720a774077a6de55ac708761a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b07ae17193f77e3271c6749d378b18" id="r_a41b07ae17193f77e3271c6749d378b18"><td class="memItemLeft" align="right" valign="top">std::thread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a41b07ae17193f77e3271c6749d378b18">cycle_detection_thread_</a></td></tr>
<tr class="separator:a41b07ae17193f77e3271c6749d378b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be78e1cad7208831e771c576c87de63" id="r_a4be78e1cad7208831e771c576c87de63"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>, std::vector&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a4be78e1cad7208831e771c576c87de63">waits_for_</a></td></tr>
<tr class="separator:a4be78e1cad7208831e771c576c87de63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8969a63e749d751dd9ca6833b1db0358" id="r_a8969a63e749d751dd9ca6833b1db0358"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a8969a63e749d751dd9ca6833b1db0358">waits_for_latch_</a></td></tr>
<tr class="separator:a8969a63e749d751dd9ca6833b1db0358"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p><a class="el" href="../../df/d43/classbustub_1_1LockManager.html">LockManager</a> handles transactions asking for locks on records. </p>
</div><h2 class="groupheader">成员枚举类型说明</h2>
<a id="ae9072590d90b9b3861d415052c4872d3" name="ae9072590d90b9b3861d415052c4872d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9072590d90b9b3861d415052c4872d3">&#9670;&#160;</a></span>LockMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">bustub::LockManager::LockMode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">枚举值</th></tr><tr><td class="fieldname"><a id="ae9072590d90b9b3861d415052c4872d3a049518eb4dc1859c7cebbe15876cfd63" name="ae9072590d90b9b3861d415052c4872d3a049518eb4dc1859c7cebbe15876cfd63"></a>SHARED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9072590d90b9b3861d415052c4872d3af45c3a0bb3687ed8e221253b3fd4a2ce" name="ae9072590d90b9b3861d415052c4872d3af45c3a0bb3687ed8e221253b3fd4a2ce"></a>EXCLUSIVE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9072590d90b9b3861d415052c4872d3ab11f57a27691980d3e7a302a7afc6aad" name="ae9072590d90b9b3861d415052c4872d3ab11f57a27691980d3e7a302a7afc6aad"></a>INTENTION_SHARED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9072590d90b9b3861d415052c4872d3ab59417045d16d94633837c40df3d2276" name="ae9072590d90b9b3861d415052c4872d3ab59417045d16d94633837c40df3d2276"></a>INTENTION_EXCLUSIVE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae9072590d90b9b3861d415052c4872d3aa749f2cb8ae6821b5ac743924558b12b" name="ae9072590d90b9b3861d415052c4872d3aa749f2cb8ae6821b5ac743924558b12b"></a>SHARED_INTENTION_EXCLUSIVE&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">构造及析构函数说明</h2>
<a id="a9a6999ff8d30e8f121741d074cb88775" name="a9a6999ff8d30e8f121741d074cb88775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a6999ff8d30e8f121741d074cb88775">&#9670;&#160;</a></span>LockManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bustub::LockManager::LockManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a new lock manager configured for the deadlock detection policy. </p>

</div>
</div>
<a id="a19fe2e283f59cf01ac33ec74ccd5ff16" name="a19fe2e283f59cf01ac33ec74ccd5ff16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19fe2e283f59cf01ac33ec74ccd5ff16">&#9670;&#160;</a></span>~LockManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bustub::LockManager::~LockManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a id="a5df679feece998f685f834d98044e289" name="a5df679feece998f685f834d98044e289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df679feece998f685f834d98044e289">&#9670;&#160;</a></span>AddEdge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::LockManager::AddEdge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>&#160;</td>
          <td class="paramname"><em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>&#160;</td>
          <td class="paramname"><em>t2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; void</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds an edge from t1 -&gt; t2 from waits for graph. </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">t1</td><td>transaction waiting for a lock </td></tr>
    <tr><td class="paramname">t2</td><td>transaction being waited for </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af279e37d82a658df65eabd1630823734" name="af279e37d82a658df65eabd1630823734"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af279e37d82a658df65eabd1630823734">&#9670;&#160;</a></span>AreLocksCompatible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::AreLocksCompatible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>l1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>l2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt;  bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b5f3e3bd9f8f1d12b85aa7d8ea0a4a4" name="a7b5f3e3bd9f8f1d12b85aa7d8ea0a4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b5f3e3bd9f8f1d12b85aa7d8ea0a4a4">&#9670;&#160;</a></span>CanLockUpgrade()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::CanLockUpgrade </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>curr_lock_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>requested_lock_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt;  bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a51f3df9531ee28e0803f4f62cade844a" name="a51f3df9531ee28e0803f4f62cade844a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f3df9531ee28e0803f4f62cade844a">&#9670;&#160;</a></span>CanTxnTakeLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::CanTxnTakeLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>lock_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt;  bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acc760ce7abdd4c0a480519a75c5eefa0" name="acc760ce7abdd4c0a480519a75c5eefa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc760ce7abdd4c0a480519a75c5eefa0">&#9670;&#160;</a></span>CheckAppropriateLockOnTable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::CheckAppropriateLockOnTable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>row_lock_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt;  bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0465166131ad8dd93c14a9699a66309d" name="a0465166131ad8dd93c14a9699a66309d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0465166131ad8dd93c14a9699a66309d">&#9670;&#160;</a></span>FindCycle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::FindCycle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>&#160;</td>
          <td class="paramname"><em>source_txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_set&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>on_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_set&lt; <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>visited</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> *&#160;</td>
          <td class="paramname"><em>abort_txn_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt;  bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac5d26af3985fdcd94bd8412ff5b21ad6" name="ac5d26af3985fdcd94bd8412ff5b21ad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d26af3985fdcd94bd8412ff5b21ad6">&#9670;&#160;</a></span>GetEdgeList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::GetEdgeList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; std::vector&lt;std::pair&lt;<a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>, <a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>&gt;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>返回</dt><dd>all edges in current waits_for graph </dd></dl>

</div>
</div>
<a id="ad97ae8bb96143affec0af9f38916c233" name="ad97ae8bb96143affec0af9f38916c233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad97ae8bb96143affec0af9f38916c233">&#9670;&#160;</a></span>GrantNewLocksIfPossible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::LockManager::GrantNewLocksIfPossible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d5d/classbustub_1_1LockManager_1_1LockRequestQueue.html">LockRequestQueue</a> *&#160;</td>
          <td class="paramname"><em>lock_request_queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab3f9957ef501be56f430ab93457dd17f" name="ab3f9957ef501be56f430ab93457dd17f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3f9957ef501be56f430ab93457dd17f">&#9670;&#160;</a></span>HasCycle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::HasCycle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a> *&#160;</td>
          <td class="paramname"><em>txn_id</em></td><td>)</td>
          <td> -&gt; bool</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks if the graph has a cycle, returning the newest transaction ID in the cycle if so. </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">txn_id</td><td>if the graph has a cycle, will contain the newest transaction ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>false if the graph has no cycle, otherwise stores the newest transaction ID in the cycle to txn_id </dd></dl>

</div>
</div>
<a id="a988be485d32619bd5165855c9cdaf0cf" name="a988be485d32619bd5165855c9cdaf0cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a988be485d32619bd5165855c9cdaf0cf">&#9670;&#160;</a></span>LockRow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::LockRow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>lock_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> &amp;&#160;</td>
          <td class="paramname"><em>rid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; bool</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquire a lock on rid in the given lock_mode. If the transaction already holds a lock on the row, upgrade the lock to the specified lock_mode (if possible).</p>
<p>This method should abort the transaction and throw a TransactionAbortException under certain circumstances. See [LOCK_NOTE] in header file.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">txn</td><td>the transaction requesting the lock upgrade </td></tr>
    <tr><td class="paramname">lock_mode</td><td>the lock mode for the requested lock </td></tr>
    <tr><td class="paramname">oid</td><td>the table_oid_t of the table the row belongs to </td></tr>
    <tr><td class="paramname">rid</td><td>the <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> of the row to be locked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>true if the upgrade is successful, false otherwise </dd></dl>

</div>
</div>
<a id="a2fb7aa117f151b0033d96c247292d375" name="a2fb7aa117f151b0033d96c247292d375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fb7aa117f151b0033d96c247292d375">&#9670;&#160;</a></span>LockTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::LockTable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>lock_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;&#160;</td>
          <td class="paramname"><em>oid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; bool</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>[LOCK_NOTE]</p>
<p>GENERAL BEHAVIOUR: Both <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a2fb7aa117f151b0033d96c247292d375">LockTable()</a> and <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a988be485d32619bd5165855c9cdaf0cf">LockRow()</a> are blocking methods; they should wait till the lock is granted and then return. If the transaction was aborted in the meantime, do not grant the lock and return false.</p>
<p>MULTIPLE TRANSACTIONS: <a class="el" href="../../df/d43/classbustub_1_1LockManager.html">LockManager</a> should maintain a queue for each resource; locks should be granted to transactions in a FIFO manner. If there are multiple compatible lock requests, all should be granted at the same time as long as FIFO is honoured.</p>
<p>SUPPORTED LOCK MODES: Table locking should support all lock modes. Row locking should not support Intention locks. Attempting this should set the TransactionState as ABORTED and throw a TransactionAbortException (ATTEMPTED_INTENTION_LOCK_ON_ROW)</p>
<p>ISOLATION LEVEL: Depending on the ISOLATION LEVEL, a transaction should attempt to take locks:</p><ul>
<li>Only if required, AND</li>
<li>Only if allowed</li>
</ul>
<p>For instance S/IS/SIX locks are not required under READ_UNCOMMITTED, and any such attempt should set the TransactionState as ABORTED and throw a TransactionAbortException (LOCK_SHARED_ON_READ_UNCOMMITTED).</p>
<p>Similarly, X/IX locks on rows are not allowed if the the <a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> State is SHRINKING, and any such attempt should set the TransactionState as ABORTED and throw a TransactionAbortException (LOCK_ON_SHRINKING).</p>
<p>REPEATABLE_READ: The transaction is required to take all locks. All locks are allowed in the GROWING state No locks are allowed in the SHRINKING state</p>
<p>READ_COMMITTED: The transaction is required to take all locks. All locks are allowed in the GROWING state Only IS, S locks are allowed in the SHRINKING state</p>
<p>READ_UNCOMMITTED: The transaction is required to take only IX, X locks. X, IX locks are allowed in the GROWING state. S, IS, SIX locks are never allowed</p>
<p>MULTILEVEL LOCKING: While locking rows, Lock() should ensure that the transaction has an appropriate lock on the table which the row belongs to. For instance, if an exclusive lock is attempted on a row, the transaction must hold either X, IX, or SIX on the table. If such a lock does not exist on the table, Lock() should set the TransactionState as ABORTED and throw a TransactionAbortException (TABLE_LOCK_NOT_PRESENT)</p>
<p>LOCK UPGRADE: Calling Lock() on a resource that is already locked should have the following behaviour:</p><ul>
<li>If requested lock mode is the same as that of the lock presently held, Lock() should return true since it already has the lock.</li>
<li>If requested lock mode is different, Lock() should upgrade the lock held by the transaction.</li>
<li>Basically there should be three steps to perform a lock upgrade in general<ul>
<li>1. Check the precondition of upgrade</li>
<li>2. Drop the current lock, reserve the upgrade position</li>
<li>3. Wait to get the new lock granted</li>
</ul>
</li>
</ul>
<p>A lock request being upgraded should be prioritized over other waiting lock requests on the same resource.</p>
<p>While upgrading, only the following transitions should be allowed: IS -&gt; [S, X, IX, SIX] S -&gt; [X, SIX] IX -&gt; [X, SIX] SIX -&gt; [X] Any other upgrade is considered incompatible, and such an attempt should set the TransactionState as ABORTED and throw a TransactionAbortException (INCOMPATIBLE_UPGRADE)</p>
<p>Furthermore, only one transaction should be allowed to upgrade its lock on a given resource. Multiple concurrent lock upgrades on the same resource should set the TransactionState as ABORTED and throw a TransactionAbortException (UPGRADE_CONFLICT).</p>
<p>BOOK KEEPING: If a lock is granted to a transaction, lock manager should update its lock sets appropriately (check <a class="el" href="../../d0/db6/transaction_8h.html">transaction.h</a>)</p>
<p>You probably want to consider which type of lock to directly apply on table when implementing executor later [UNLOCK_NOTE]</p>
<p>GENERAL BEHAVIOUR: Both <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#a89c917de275498c22f53138355787447">UnlockTable()</a> and <a class="el" href="../../df/d43/classbustub_1_1LockManager.html#acd25bf2d1fd916e5d0900fdcee196aa2">UnlockRow()</a> should release the lock on the resource and return. Both should ensure that the transaction currently holds a lock on the resource it is attempting to unlock. If not, <a class="el" href="../../df/d43/classbustub_1_1LockManager.html">LockManager</a> should set the TransactionState as ABORTED and throw a TransactionAbortException (ATTEMPTED_UNLOCK_BUT_NO_LOCK_HELD)</p>
<p>Additionally, unlocking a table should only be allowed if the transaction does not hold locks on any row on that table. If the transaction holds locks on rows of the table, Unlock should set the <a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> State as ABORTED and throw a TransactionAbortException (TABLE_UNLOCKED_BEFORE_UNLOCKING_ROWS).</p>
<p>Finally, unlocking a resource should also grant any new lock requests for the resource (if possible).</p>
<p>TRANSACTION STATE UPDATE Unlock should update the transaction state appropriately (depending upon the ISOLATION LEVEL) Only unlocking S or X locks changes transaction state.</p>
<p>REPEATABLE_READ: Unlocking S/X locks should set the transaction state to SHRINKING</p>
<p>READ_COMMITTED: Unlocking X locks should set the transaction state to SHRINKING. Unlocking S locks does not affect transaction state.</p>
<p>READ_UNCOMMITTED: Unlocking X locks should set the transaction state to SHRINKING. S locks are not permitted under READ_UNCOMMITTED. The behaviour upon unlocking an S lock under this isolation level is undefined.</p>
<p>BOOK KEEPING: After a resource is unlocked, lock manager should update the transaction's lock sets appropriately (check <a class="el" href="../../d0/db6/transaction_8h.html">transaction.h</a>) Acquire a lock on table_oid_t in the given lock_mode. If the transaction already holds a lock on the table, upgrade the lock to the specified lock_mode (if possible).</p>
<p>This method should abort the transaction and throw a TransactionAbortException under certain circumstances. See [LOCK_NOTE] in header file.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">txn</td><td>the transaction requesting the lock upgrade </td></tr>
    <tr><td class="paramname">lock_mode</td><td>the lock mode for the requested lock </td></tr>
    <tr><td class="paramname">oid</td><td>the table_oid_t of the table to be locked in lock_mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>true if the upgrade is successful, false otherwise </dd></dl>

</div>
</div>
<a id="af84ac003c1fda4f5a32fc3ecfc98bc80" name="af84ac003c1fda4f5a32fc3ecfc98bc80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af84ac003c1fda4f5a32fc3ecfc98bc80">&#9670;&#160;</a></span>RemoveEdge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::LockManager::RemoveEdge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>&#160;</td>
          <td class="paramname"><em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>&#160;</td>
          <td class="paramname"><em>t2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; void</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes an edge from t1 -&gt; t2 from waits for graph. </p><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">t1</td><td>transaction waiting for a lock </td></tr>
    <tr><td class="paramname">t2</td><td>transaction being waited for </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac46d2abc2ed8ffa17934036d87e50d08" name="ac46d2abc2ed8ffa17934036d87e50d08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac46d2abc2ed8ffa17934036d87e50d08">&#9670;&#160;</a></span>RunCycleDetection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::LockManager::RunCycleDetection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; void</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs cycle detection in the background. </p>

</div>
</div>
<a id="af8d98acacc57c96f93d2a0a2c5361a99" name="af8d98acacc57c96f93d2a0a2c5361a99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8d98acacc57c96f93d2a0a2c5361a99">&#9670;&#160;</a></span>StartDeadlockDetection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::LockManager::StartDeadlockDetection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad2c8d79190ecd17c7c6051b37485a7cb" name="ad2c8d79190ecd17c7c6051b37485a7cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2c8d79190ecd17c7c6051b37485a7cb">&#9670;&#160;</a></span>UnlockAll()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bustub::LockManager::UnlockAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acd25bf2d1fd916e5d0900fdcee196aa2" name="acd25bf2d1fd916e5d0900fdcee196aa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd25bf2d1fd916e5d0900fdcee196aa2">&#9670;&#160;</a></span>UnlockRow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::UnlockRow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> &amp;&#160;</td>
          <td class="paramname"><em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; bool</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release the lock held on a row by the transaction.</p>
<p>This method should abort the transaction and throw a TransactionAbortException under certain circumstances. See [UNLOCK_NOTE] in header file.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">txn</td><td>the transaction releasing the lock </td></tr>
    <tr><td class="paramname">rid</td><td>the <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> that is locked by the transaction </td></tr>
    <tr><td class="paramname">oid</td><td>the table_oid_t of the table the row belongs to </td></tr>
    <tr><td class="paramname">rid</td><td>the <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> of the row to be unlocked </td></tr>
    <tr><td class="paramname">force</td><td>unlock the tuple regardless of isolation level, not changing the transaction state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>true if the unlock is successful, false otherwise </dd></dl>

</div>
</div>
<a id="a89c917de275498c22f53138355787447" name="a89c917de275498c22f53138355787447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89c917de275498c22f53138355787447">&#9670;&#160;</a></span>UnlockTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::UnlockTable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;&#160;</td>
          <td class="paramname"><em>oid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; bool</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release the lock held on a table by the transaction.</p>
<p>This method should abort the transaction and throw a TransactionAbortException under certain circumstances. See [UNLOCK_NOTE] in header file.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">txn</td><td>the transaction releasing the lock </td></tr>
    <tr><td class="paramname">oid</td><td>the table_oid_t of the table to be unlocked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>true if the unlock is successful, false otherwise </dd></dl>

</div>
</div>
<a id="a3c515c4b2aeb5d3468183c33b27296d2" name="a3c515c4b2aeb5d3468183c33b27296d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c515c4b2aeb5d3468183c33b27296d2">&#9670;&#160;</a></span>UpgradeLockRow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::UpgradeLockRow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>lock_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> &amp;&#160;</td>
          <td class="paramname"><em>rid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt;  bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8e0b652c7c55afc4c58206c4b427207c" name="a8e0b652c7c55afc4c58206c4b427207c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e0b652c7c55afc4c58206c4b427207c">&#9670;&#160;</a></span>UpgradeLockTable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto bustub::LockManager::UpgradeLockTable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d88/classbustub_1_1Transaction.html">Transaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d43/classbustub_1_1LockManager.html#ae9072590d90b9b3861d415052c4872d3">LockMode</a>&#160;</td>
          <td class="paramname"><em>lock_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a> &amp;&#160;</td>
          <td class="paramname"><em>oid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt;  bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Spring 2023 </p>

</div>
</div>
<h2 class="groupheader">类成员变量说明</h2>
<a id="a41b07ae17193f77e3271c6749d378b18" name="a41b07ae17193f77e3271c6749d378b18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41b07ae17193f77e3271c6749d378b18">&#9670;&#160;</a></span>cycle_detection_thread_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread* bustub::LockManager::cycle_detection_thread_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d7352d720a774077a6de55ac708761a" name="a4d7352d720a774077a6de55ac708761a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d7352d720a774077a6de55ac708761a">&#9670;&#160;</a></span>enable_cycle_detection_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; bustub::LockManager::enable_cycle_detection_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3e1864c6f96f2dfab38930dcdadf4fd6" name="a3e1864c6f96f2dfab38930dcdadf4fd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e1864c6f96f2dfab38930dcdadf4fd6">&#9670;&#160;</a></span>row_lock_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a>, std::shared_ptr&lt;<a class="el" href="../../dc/d5d/classbustub_1_1LockManager_1_1LockRequestQueue.html">LockRequestQueue</a>&gt; &gt; bustub::LockManager::row_lock_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Structure that holds lock requests for a given <a class="el" href="../../d3/d22/classbustub_1_1RID.html">RID</a> </p>

</div>
</div>
<a id="a5994642266915aa8083cf74587873cbf" name="a5994642266915aa8083cf74587873cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5994642266915aa8083cf74587873cbf">&#9670;&#160;</a></span>row_lock_map_latch_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex bustub::LockManager::row_lock_map_latch_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Coordination </p>

</div>
</div>
<a id="aaa3c9cbaac66341c0154405c8ed2fbc7" name="aaa3c9cbaac66341c0154405c8ed2fbc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3c9cbaac66341c0154405c8ed2fbc7">&#9670;&#160;</a></span>table_lock_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="../../de/dda/namespacebustub.html#a3571cdcf7aa43bd929669794e75cbc48">table_oid_t</a>, std::shared_ptr&lt;<a class="el" href="../../dc/d5d/classbustub_1_1LockManager_1_1LockRequestQueue.html">LockRequestQueue</a>&gt; &gt; bustub::LockManager::table_lock_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Structure that holds lock requests for a given table oid </p>

</div>
</div>
<a id="a5997c97741bb1f0c3e86a2bc1fdf6f52" name="a5997c97741bb1f0c3e86a2bc1fdf6f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5997c97741bb1f0c3e86a2bc1fdf6f52">&#9670;&#160;</a></span>table_lock_map_latch_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex bustub::LockManager::table_lock_map_latch_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Coordination </p>

</div>
</div>
<a id="a4a17fdd331a495258d1bde87b1e39635" name="a4a17fdd331a495258d1bde87b1e39635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a17fdd331a495258d1bde87b1e39635">&#9670;&#160;</a></span>txn_manager_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/ddc/classbustub_1_1TransactionManager.html">TransactionManager</a>* bustub::LockManager::txn_manager_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4be78e1cad7208831e771c576c87de63" name="a4be78e1cad7208831e771c576c87de63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be78e1cad7208831e771c576c87de63">&#9670;&#160;</a></span>waits_for_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>, std::vector&lt;<a class="el" href="../../de/dda/namespacebustub.html#a6fc9c36dd76ed654983fc39f5fef1235">txn_id_t</a>&gt; &gt; bustub::LockManager::waits_for_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Waits-for graph representation. </p>

</div>
</div>
<a id="a8969a63e749d751dd9ca6833b1db0358" name="a8969a63e749d751dd9ca6833b1db0358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8969a63e749d751dd9ca6833b1db0358">&#9670;&#160;</a></span>waits_for_latch_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex bustub::LockManager::waits_for_latch_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>src/include/concurrency/<a class="el" href="../../dd/ded/lock__manager_8h_source.html">lock_manager.h</a></li>
<li>src/concurrency/<a class="el" href="../../d5/d14/lock__manager_8cpp.html">lock_manager.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
